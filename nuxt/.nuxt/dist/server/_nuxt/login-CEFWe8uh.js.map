{"version":3,"file":"login-CEFWe8uh.js","sources":["../../../../app/pages/login.vue"],"sourcesContent":["<script lang=\"ts\" setup>\nimport { FetchError } from \"ofetch\";\n\ndefinePageMeta({\n  middleware: [\"guest-only\"],\n  layout: false,\n});\n\nconst { login } = useAuth();\n\nconst form = reactive({\n  data: {\n    email: \"admin@gmail.com\",\n    password: \"password\",\n    rememberMe: false,\n  },\n  error: \"\",\n  pending: false,\n});\n\nconst isAdmin = useAdmin();\n\nasync function onLoginClick() {\n  try {\n    form.error = \"\";\n    form.pending = true;\n\n    await login(form.data.email, form.data.password, form.data.rememberMe);\n\n    const redirect = isAdmin.value ? \"/admin\" : \"/private\";\n    await navigateTo(redirect);\n  } catch (error) {\n    console.error(error);\n    if (!(error instanceof FetchError)) {\n      throw error;\n    }\n\n    form.error = error.data.message;\n  } finally {\n    form.pending = false;\n  }\n}\n</script>\n\n<template>\n  <div class=\"min-h-screen flex flex-col\">\n    <header>\n      <h1 class=\"my-24 font-bold text-2xl text-center\">Login to your account</h1>\n    </header>\n    <main class=\"mx-auto max-w-sm w-full\">\n      <form class=\"mb-6 p-12 bg-slate-900 rounded shadow\" @submit.prevent=\"onLoginClick\">\n        <p\n          v-if=\"form.error\"\n          class=\"mb-3 px-3 py-1.5 w-full border rounded border-red-400 text-sm text-center text-red-400\"\n        >\n          {{ form.error }}\n        </p>\n        <div class=\"mb-3\">\n          <label for=\"email\" class=\"mb-1 inline-block font-semibold text-sm text-slate-200\">Email address</label>\n          <input\n            id=\"email\"\n            v-model=\"form.data.email\"\n            type=\"email\"\n            class=\"px-3 py-1.5 w-full border rounded border-slate-700 bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-slate-700 focus:border-transparent\"\n            required\n          >\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"password\" class=\"mb-1 inline-block font-semibold text-sm text-slate-200\">Password</label>\n          <input\n            id=\"password\"\n            v-model=\"form.data.password\"\n            type=\"password\"\n            class=\"px-3 py-1.5 w-full border rounded border-slate-700 bg-slate-800 text-sm focus:outline-none focus:ring-2 focus:ring-slate-700 focus:border-transparent\"\n            required\n          >\n        </div>\n        <div class=\"mb-3 flex justify-end items-center\">\n          <label for=\"remember-me\" class=\"mr-1 text-sm text-light-100\">Remember me</label>\n          <input\n            id=\"remember-me\"\n            v-model=\"form.data.rememberMe\"\n            type=\"checkbox\"\n            class=\"w-4 h-4 accent-slate-700 focus:outline-none focus:ring-2 focus:ring-slate-700 focus:border-transparent\"\n          >\n        </div>\n        <div>\n          <button\n            type=\"submit\"\n            :disabled=\"form.pending\"\n            class=\"px-3 py-1.5 w-full rounded bg-light-100 font-semibold text-sm text-slate-950 hover:bg-light-700 focus:outline-none focus:bg-light-700 transition-colors\"\n          >\n            Sign in\n          </button>\n        </div>\n      </form>\n      <div class=\"mb-6 text-center\">\n        <NuxtLink to=\"/\" class=\"text-xs text-slate-400 transition-colors hover:text-light-100\">Go back home</NuxtLink>\n      </div>\n      <div>\n        <h3 class=\"mb-1 font-bold\">Help</h3>\n        <p class=\"text-sm text-slate-400\">\n          For demo purpose, this application comes with predefined credentials you can use to login:\n        </p>\n        <ul class=\"text-sm text-slate-400\">\n          <li><code class=\"text-slate-200\">admin@gmail.com</code> with <code class=\"text-slate-200\">password</code></li>\n          <li><code class=\"text-slate-200\">user@gmail.com</code> with <code class=\"text-slate-200\">password</code></li>\n        </ul>\n      </div>\n    </main>\n    <BaseFooter class=\"mt-auto\" />\n  </div>\n</template>\n"],"names":["_ssrRenderAttrs","_mergeProps","_unref","_ssrInterpolate","_ssrIncludeBooleanAttr","_push","_parent","_ssrRenderComponent"],"mappings":";;;;;;;;;;;;;;;;;;;AAQkB,YAAA;AAElB,UAAM,OAAO,SAAS;AAAA,MACpB,MAAM;AAAA,QACJ,OAAO;AAAA,QACP,UAAU;AAAA,QACV,YAAY;AAAA,MAAA;AAAA,MAEd,OAAO;AAAA,MACP,SAAS;AAAA,IAAA,CACV;AAEe,aAAA;;;;AAyBT,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,gCAA4B,MAAA,CAAA,CAAA,yLAAA;AAOzB,UAAAC,MAAA,IAAA,EAAK,OAAK;AAGb,cAAA,qGAAAC,eAAAD,MAAA,IAAA,EAAK,KAAK,CAAA,MAAA;AAAA;;;gLAMFA,MAAA,IAAA,EAAK,KAAK,KAAK,iWAUfA,MAAA,IAAA,EAAK,KAAK,QAAQ,6XAUlBA,MAAA,IAAA,EAAK,KAAK,UAAU,oBAApBA,MAAA,IAAA,EAAK,KAAK,YAAU,IAAA,IAApBA,MAAA,IAAA,EAAK,KAAK,UAAU,IAAA,aAAA,qKAQlBE,sBAAAF,MAAA,IAAA,EAAK,OAAO,IAAA,cAAA;;QAQjB,IAAG;AAAA,QAAI,OAAM;AAAA,MAAA;yBAAvB,CAA8G,GAAAG,QAAAC,UAAA,aAAA;;;;;8BAAvB,cAAY;AAAA,YAAA;AAAA;;;;;AAa3F,YAAAC,mBAAA,uBAAA,EAAA,OAAM,aAAS,MAAA,OAAA,CAAA;;;;;;;;;;;"}